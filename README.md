# ربات جستجوی نام‌ها

این ربات تلگرامی برای جستجوی نام جان‌باختگان راه آزادی ایران طراحی شده است. اطلاعات این ربات از کانال [@RememberTheirNames](https://t.me/RememberTheirNames) گرفته می‌شود.

## پیش‌نیازها

برای اجرای این پروژه به موارد زیر نیاز دارید:
- [Bun](https://bun.sh) (برای اجرای کدها)
- [MongoDB](https://www.mongodb.com) (پایگاه داده)
- [Meilisearch](https://www.meilisearch.com) (موتور جستجوی پیشرفته)
- توکن ربات که از [@BotFather](https://t.me/BotFather) گرفته‌اید.

## نصب و راه‌اندازی

۱. ابتدا وابستگی‌های پروژه را نصب کنید:
```bash
bun install
```

۲. یک فایل به نام `.env` در پوشهٔ اصلی بسازید (می‌توانید از روی فایل `.env.example` کپی بگیرید) و اطلاعات خود را در آن وارد کنید:

```env
BOT_TOKEN=توکن_ربات_شما
MONGO_URI=mongodb://localhost:27017/namesearch
MEILI_URL=http://localhost:7700
MEILI_MASTER_KEY=   # اختیاری (اگر برای Meilisearch رمز گذاشتید اینجا وارد کنید)
ADMIN_ID=123456789  # اختیاری (شناسه عددی تلگرام مدیر برای افزودن اطلاعات جدید)
```

## وارد کردن اطلاعات

- فایل خروجی کانال تلگرام (`result.json`) را در پوشهٔ `data` قرار دهید.
- عکس‌ها را در پوشهٔ `data/photos` بریزید.
- دستور زیر را اجرا کنید تا اطلاعات وارد دیتابیس شده و برای جستجو آماده شوند:

```bash
bun run import
```

(اگر فایل `result.json` را تغییر دهید، با اجرای مجدد ربات، اطلاعات به صورت خودکار به‌روز می‌شوند.)

## اجرای ربات

**اجرا روی سیستم خودتان:**

```bash
bun run start
```

**اجرا با داکر (Docker):**

```bash
docker compose up --build -d
```
این دستور همه سرویس‌ها (دیتابیس، جستجوگر و ربات) را با هم اجرا می‌کند.

## نحوه استفاده

- **شروع:** دستور `/start` را بزنید.
- **راهنما:** دستور `/help` را بزنید.
- **جستجو:** کافیست هر متنی (مثل نام شخص، نام شهر یا تاریخ) را بنویسید و ارسال کنید.
  - جستجو هوشمند است و حتی اگر غلط املایی داشته باشید یا کلمات را جابجا بنویسید (مثلاً «امیر تهران») باز هم نتیجه را پیدا می‌کند.
  - نتایج به صورت ۱۰ تایی نمایش داده می‌شوند و می‌توانید با دکمه‌های «صفحه بعد» و «صفحه قبل» بقیه را ببینید.

### قابلیت‌های مدیر
اگر شناسه شما در `ADMIN_ID` تنظیم شده باشد، می‌توانید با فوروارد کردن یک پیام (شامل عکس و متن) از کانال به ربات، آن را به دیتابیس اضافه کنید.

## حریم خصوصی و امنیت

این پروژه به صورت متن‌باز (Open Source) منتشر شده تا همه بتوانند کدها را بررسی کنند.
**امنیت شما اولویت ماست:**
- هیچ اطلاعاتی از کاربران (نام کاربری، آیدی، پیام‌ها یا جستجوها) ذخیره نمی‌شود.
- هیچ‌گونه ردیابی یا لاگ (Log) از فعالیت کاربران وجود ندارد.
